0 failed, 0 passed, 2362 to go.
tests/issue656.fut:
Compiling with --backend=cuda:
futhark: internal error: PAP object (0x4201985c20) entered!
Stack trace:
futhark: Failed to get stack frames of current process: No DWARF information found: Success
                 0xbb63e90    set_initial_registers (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)
            0x7f1d765bf168    dwfl_thread_getframes (/nix/store/qsfx2pvlcapk6aiw3jf21crdx82izd6r-elfutils-0.192/lib/libdw-0.192.so)
            0x7f1d765beb9b    get_one_thread_cb (/nix/store/qsfx2pvlcapk6aiw3jf21crdx82izd6r-elfutils-0.192/lib/libdw-0.192.so)
            0x7f1d765bef6a    dwfl_getthreads (/nix/store/qsfx2pvlcapk6aiw3jf21crdx82izd6r-elfutils-0.192/lib/libdw-0.192.so)
            0x7f1d765bf4d4    dwfl_getthread_frames (/nix/store/qsfx2pvlcapk6aiw3jf21crdx82izd6r-elfutils-0.192/lib/libdw-0.192.so)
                 0xbb645d1    libdwGetBacktrace (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)
                 0xbb21586    rtsFatalInternalErrorFn (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)
                 0xbb217ba    barf (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)
                 0xbb4cde5    stg_PAP_info (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)

    (GHC version 9.6.6 for x86_64_unknown_linux)
    Please report this as a GHC bug:  https://www.haskell.org/ghc/reportabug

tests/distribution/distribution3.fut:
Command failed with ExitFailure 1:
./tests/distribution/distribution3 --cache-file tests/distribution/distribution3.fut.cache --tuning tests/distribution/distribution3.fut.tuning
Stderr:
./tests/distribution/distribution3: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4098): error: "gtid_6098" has already been declared in the current scope
      int64_t gtid_6098;
              ^

futhark-cuda(4099): error: "gtid_6099" has already been declared in the current scope
      int64_t gtid_6099;
              ^

futhark-cuda(4113): error: "gtid_6109" has already been declared in the current scope
      int64_t gtid_6109;
              ^

futhark-cuda(4114): error: "gtid_6110" has already been declared in the current scope
      int64_t gtid_6110;
              ^

4 errors detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/distribution/distribution2.fut:
Command failed with ExitFailure 1:
./tests/distribution/distribution2 --cache-file tests/distribution/distribution2.fut.cache
Stderr:
./tests/distribution/distribution2: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4636): error: "gtid_8610" has already been declared in the current scope
      int64_t gtid_8610;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/safety/scan1.fut:
Compiling with --backend=cuda:
gcc failed with code 1:
tests/safety/scan1.c: In function ‘futrts_entry_main’:
tests/safety/scan1.c:8528:372: error: passing argument 12 of ‘gpu_kernel_mainziscan_stage1_5755’ makes integer from pointer without a cast [-Wint-conversion]
 8528 |             err = gpu_kernel_mainziscan_stage1_5755(ctx, stage1_num_tblocks_5765, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_5749, 1, 1, smax64((int64_t) 1, (int64_t) 8 * segscan_tblock_sizze_5750) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 8 * segscan_tblock_sizze_5750), (int64_t) 8), (int64_t) 8), n_5626, num_threads_5768, xs_mem_5758.mem, scan_out_mem_5766);
      |                                                                                                                                                                                                                                                                                                                                                                                    ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                    |
      |                                                                                                                                                                                                                                                                                                                                                                                    unsigned char *
tests/safety/scan1.c:8251:281: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8251 | static int gpu_kernel_mainziscan_stage1_5755(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int32_t arg1, gpu_mem arg2, gpu_mem arg3)
      |                                                                                                                                                                                                                                                                                 ~~~~~~~~^~~~
tests/safety/scan1.c:8536:353: error: passing argument 13 of ‘gpu_kernel_mainziscan_stage2_5755’ makes integer from pointer without a cast [-Wint-conversion]
 8536 |             err = gpu_kernel_mainziscan_stage2_5755(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_5765, 1, 1, smax64((int64_t) 1, (int64_t) 8 * stage1_num_tblocks_5765) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 8 * stage1_num_tblocks_5765), (int64_t) 8), (int64_t) 8), n_5626, stage1_num_tblocks_5765, num_threads_5768, xs_mem_5758.mem, scan_out_mem_5766);
      |                                                                                                                                                                                                                                                                                                                                                                 ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                 |
      |                                                                                                                                                                                                                                                                                                                                                                 unsigned char *
tests/safety/scan1.c:8261:295: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8261 | static int gpu_kernel_mainziscan_stage2_5755(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int32_t arg2, gpu_mem arg3, gpu_mem arg4)
      |                                                                                                                                                                                                                                                                                               ~~~~~~~~^~~~
tests/safety/scan1.c:8545:251: error: passing argument 15 of ‘gpu_kernel_mainziscan_stage3_5755’ makes integer from pointer without a cast [-Wint-conversion]
 8545 |             err = gpu_kernel_mainziscan_stage3_5755(ctx, num_tblocks_5752, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_5749, 1, 1, (int64_t) 0, n_5626, num_tblocks_5752, num_threads_5768, required_groups_5870, xs_mem_5758.mem, mem_5761.mem, scan_out_mem_5766);
      |                                                                                                                                                                                                                                                           ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                           |
      |                                                                                                                                                                                                                                                           unsigned char *
tests/safety/scan1.c:8271:323: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8271 | static int gpu_kernel_mainziscan_stage3_5755(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int32_t arg2, int32_t arg3, gpu_mem arg4, gpu_mem arg5, gpu_mem arg6)
      |                                                                                                                                                                                                                                                                                                                           ~~~~~~~~^~~~

If you find this error message confusing, uninformative, or wrong, please open an issue:
  https://github.com/diku-dk/futhark/issues

4 failed, 217 passed, 2141 to go.
4 failed, 500 passed, 1858 to go.
tests/existential-ifs/partition.fut:
Compiling with --backend=cuda:
Running compiled program:
Running ./tests/existential-ifs/partition --cache-file tests/existential-ifs/partition.fut.cache:
Entry point: main; dataset: #0 ("[1i32, 1i32, 1i32, 1i32, 1i32]"):
tests/existential-ifs/partition.fut.main.0.actual and tests/existential-ifs/partition.fut.main.0.expected do not match:
Value #0 index [1]: expected 1, got 0
...and 3 other mismatches.
5 failed, 739 passed, 1618 to go.
tests/tokens.fut:
After sending command "call" to server process:fd:39: hGetLine: end of file
Server stderr:

CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:279:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.sendCommand (src/Futhark/Server.hs:(258,1)-(286,21))
  Futhark.Server.cmdCall (src/Futhark/Server.hs:(338,1)-(339,44))
  Futhark.CLI.Test.context1 (src/Futhark/CLI/Test.hs:67:1-48)
  Futhark.CLI.Test.runCompiledEntry (src/Futhark/CLI/Test.hs:(339,1)-(377,54))
  Control.Concurrent.Async.Internal.catchAll (Control/Concurrent/Async/Internal.hs:858:1-16)
  Control.Concurrent.Async.Internal.concurrently' (Control/Concurrent/Async/Internal.hs:(649,1)-(694,16))
  Control.Concurrent.Async.Internal.race (Control/Concurrent/Async/Internal.hs:(611,1)-(617,31))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/soacs/scan7.fut:
Compiling with --backend=cuda:
gcc failed with code 1:
tests/soacs/scan7.c: In function ‘futrts_entry_main’:
tests/soacs/scan7.c:8381:295: error: passing argument 19 of ‘gpu_kernel_mainziscan_stage1_5925’ makes integer from pointer without a cast [-Wint-conversion]
 8381 |             err = gpu_kernel_mainziscan_stage1_5925(ctx, stage1_num_tblocks_6011, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_5893, 1, 1, (int64_t) 0, n_5764, m_5765, k_5766, num_threads_5960, num_threads_5980, num_threads_6014, mem_5942.mem, mem_5959.mem, mem_5964.mem, mem_5966.mem, scan_out_mem_6012);
      |                                                                                                                                                                                                                                                                                                       ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                       |
      |                                                                                                                                                                                                                                                                                                       unsigned char *
tests/soacs/scan7.c:8108:379: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8108 | static int gpu_kernel_mainziscan_stage1_5925(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10)
      |                                                                                                                                                                                                                                                                                                                                                                                   ~~~~~~~~^~~~~
tests/soacs/scan7.c:8388:266: error: passing argument 19 of ‘gpu_kernel_mainziscan_stage2_5925’ makes integer from pointer without a cast [-Wint-conversion]
 8388 |             err = gpu_kernel_mainziscan_stage2_5925(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_6011, 1, 1, (int64_t) 0, n_5764, m_5765, k_5766, num_threads_5960, num_threads_5980, stage1_num_tblocks_6011, num_threads_6014, mem_5942.mem, mem_5964.mem, mem_5966.mem, scan_out_mem_6012);
      |                                                                                                                                                                                                                                                                          ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                          |
      |                                                                                                                                                                                                                                                                          unsigned char *
tests/soacs/scan7.c:8118:379: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8118 | static int gpu_kernel_mainziscan_stage2_5925(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int64_t arg5, int32_t arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10)
      |                                                                                                                                                                                                                                                                                                                                                                                   ~~~~~~~~^~~~~
tests/soacs/scan7.c:8396:328: error: passing argument 21 of ‘gpu_kernel_mainziscan_stage3_5925’ makes integer from pointer without a cast [-Wint-conversion]
 8396 |             err = gpu_kernel_mainziscan_stage3_5925(ctx, num_tblocks_5920, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_5893, 1, 1, (int64_t) 0, n_5764, m_5765, k_5766, num_tblocks_5920, num_threads_5960, num_threads_5980, num_threads_6014, required_groups_6088, mem_5964.mem, mem_5966.mem, mem_5975.mem, mem_5979.mem, scan_out_mem_6012);
      |                                                                                                                                                                                                                                                                                                                                        ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                        |
      |                                                                                                                                                                                                                                                                                                                                        unsigned char *
tests/soacs/scan7.c:8128:409: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8128 | static int gpu_kernel_mainziscan_stage3_5925(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int64_t arg5, int32_t arg6, int32_t arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12)
      |                                                                                                                                                                                                                                                                                                                                                                                                                 ~~~~~~~~^~~~~

If you find this error message confusing, uninformative, or wrong, please open an issue:
  https://github.com/diku-dk/futhark/issues

tests/soacs/partition2.fut:
Compiling with --backend=cuda:
Running compiled program:
Running ./tests/soacs/partition2 --cache-file tests/soacs/partition2.fut.cache:
Entry point: main; dataset: #0 ("[2i32, 7i32, 1i32, 2i32, 8i32, 9i32, 1i32, 5i32, 0..."):
tests/soacs/partition2.fut.main.0.actual and tests/soacs/partition2.fut.main.0.expected do not match:
Value #2 index [0]: expected 8, got 32525
...and 10 other mismatches.
tests/soacs/filter3.fut:
Compiling with --backend=cuda:
Warning at tests/soacs/filter3.fut:12:27-28:
  Unused name "i".
Internal compiler error.  Please report this:
  https://github.com/diku-dk/futhark/issues
Type error after pass 'simplify':
In function entry_main
When checking function body
In expression of statement
  {tmp_6180 : ({}, i64)}
in body of case {true}
Type error:
Type annotation is
  {i64}
But result returns type
  {i32}


tests/soacs/scan2.fut:
Compiling with --backend=cuda:
gcc failed with code 1:
tests/soacs/scan2.c: In function ‘futrts_entry_main’:
tests/soacs/scan2.c:8496:447: error: passing argument 19 of ‘gpu_kernel_mainziscan_stage1_5993’ makes integer from pointer without a cast [-Wint-conversion]
 8496 |             err = gpu_kernel_mainziscan_stage1_5993(ctx, stage1_num_tblocks_6078, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_5987, 1, 1, smax64((int64_t) 1, segscan_tblock_sizze_5988) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, segscan_tblock_sizze_5988), (int64_t) 8), (int64_t) 8), n_5853, m_5854, num_threads_6014, num_threads_6042, num_threads_6083, flags_mem_5999.mem, mem_6002.mem, mem_6013.mem, mem_6018.mem, mem_6020.mem, scan_out_mem_6079, scan_out_mem_6081);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                               ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                               unsigned char *
tests/soacs/scan2.c:8125:379: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8125 | static int gpu_kernel_mainziscan_stage1_5993(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11)
      |                                                                                                                                                                                                                                                                                                                                                                                   ~~~~~~~~^~~~~
tests/soacs/scan2.c:8496:466: error: passing argument 20 of ‘gpu_kernel_mainziscan_stage1_5993’ makes integer from pointer without a cast [-Wint-conversion]
 8496 |             err = gpu_kernel_mainziscan_stage1_5993(ctx, stage1_num_tblocks_6078, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_5987, 1, 1, smax64((int64_t) 1, segscan_tblock_sizze_5988) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, segscan_tblock_sizze_5988), (int64_t) 8), (int64_t) 8), n_5853, m_5854, num_threads_6014, num_threads_6042, num_threads_6083, flags_mem_5999.mem, mem_6002.mem, mem_6013.mem, mem_6018.mem, mem_6020.mem, scan_out_mem_6079, scan_out_mem_6081);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  unsigned char *
tests/soacs/scan2.c:8125:394: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8125 | static int gpu_kernel_mainziscan_stage1_5993(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11)
      |                                                                                                                                                                                                                                                                                                                                                                                                  ~~~~~~~~^~~~~
tests/soacs/scan2.c:8503:394: error: passing argument 18 of ‘gpu_kernel_mainziscan_stage2_5993’ makes integer from pointer without a cast [-Wint-conversion]
 8503 |             err = gpu_kernel_mainziscan_stage2_5993(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_6078, 1, 1, smax64((int64_t) 1, stage1_num_tblocks_6078) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, stage1_num_tblocks_6078), (int64_t) 8), (int64_t) 8), n_5853, m_5854, num_threads_6014, num_threads_6042, stage1_num_tblocks_6078, num_threads_6083, mem_6002.mem, mem_6018.mem, mem_6020.mem, scan_out_mem_6079, scan_out_mem_6081);
      |                                                                                                                                                                                                                                                                                                                                                                                                          ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                                                                                                                                                                                                                                                                                                                                                          unsigned char *
tests/soacs/scan2.c:8135:365: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8135 | static int gpu_kernel_mainziscan_stage2_5993(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10)
      |                                                                                                                                                                                                                                                                                                                                                                     ~~~~~~~~^~~~
tests/soacs/scan2.c:8503:413: error: passing argument 19 of ‘gpu_kernel_mainziscan_stage2_5993’ makes integer from pointer without a cast [-Wint-conversion]
 8503 |             err = gpu_kernel_mainziscan_stage2_5993(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_6078, 1, 1, smax64((int64_t) 1, stage1_num_tblocks_6078) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, stage1_num_tblocks_6078), (int64_t) 8), (int64_t) 8), n_5853, m_5854, num_threads_6014, num_threads_6042, stage1_num_tblocks_6078, num_threads_6083, mem_6002.mem, mem_6018.mem, mem_6020.mem, scan_out_mem_6079, scan_out_mem_6081);
      |                                                                                                                                                                                                                                                                                                                                                                                                                             ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                             |
      |                                                                                                                                                                                                                                                                                                                                                                                                                             unsigned char *
tests/soacs/scan2.c:8135:379: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8135 | static int gpu_kernel_mainziscan_stage2_5993(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10)
      |                                                                                                                                                                                                                                                                                                                                                                                   ~~~~~~~~^~~~~
tests/soacs/scan2.c:8511:334: error: passing argument 21 of ‘gpu_kernel_mainziscan_stage3_5993’ makes integer from pointer without a cast [-Wint-conversion]
 8511 |             err = gpu_kernel_mainziscan_stage3_5993(ctx, num_tblocks_5990, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_5987, 1, 1, (int64_t) 0, n_5853, m_5854, num_tblocks_5990, num_threads_6014, num_threads_6042, num_threads_6083, required_groups_6185, mem_6018.mem, mem_6020.mem, mem_6034.mem, mem_6035.mem, mem_6038.mem, scan_out_mem_6079, scan_out_mem_6081);
      |                                                                                                                                                                                                                                                                                                                                              ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                              |
      |                                                                                                                                                                                                                                                                                                                                              unsigned char *
tests/soacs/scan2.c:8145:409: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8145 | static int gpu_kernel_mainziscan_stage3_5993(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, int32_t arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13)
      |                                                                                                                                                                                                                                                                                                                                                                                                                 ~~~~~~~~^~~~~
tests/soacs/scan2.c:8511:353: error: passing argument 22 of ‘gpu_kernel_mainziscan_stage3_5993’ makes integer from pointer without a cast [-Wint-conversion]
 8511 |             err = gpu_kernel_mainziscan_stage3_5993(ctx, num_tblocks_5990, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_5987, 1, 1, (int64_t) 0, n_5853, m_5854, num_tblocks_5990, num_threads_6014, num_threads_6042, num_threads_6083, required_groups_6185, mem_6018.mem, mem_6020.mem, mem_6034.mem, mem_6035.mem, mem_6038.mem, scan_out_mem_6079, scan_out_mem_6081);
      |                                                                                                                                                                                                                                                                                                                                                                 ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                 |
      |                                                                                                                                                                                                                                                                                                                                                                 unsigned char *
tests/soacs/scan2.c:8145:424: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8145 | static int gpu_kernel_mainziscan_stage3_5993(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, int32_t arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                ~~~~~~~~^~~~~

If you find this error message confusing, uninformative, or wrong, please open an issue:
  https://github.com/diku-dk/futhark/issues

tests/soacs/scan8.fut:
Compiling with --backend=cuda:
gcc failed with code 1:
tests/soacs/scan8.c: In function ‘futrts_entry_main’:
tests/soacs/scan8.c:8303:385: error: passing argument 14 of ‘gpu_kernel_mainziscan_stage1_5916’ makes integer from pointer without a cast [-Wint-conversion]
 8303 |             err = gpu_kernel_mainziscan_stage1_5916(ctx, stage1_num_tblocks_5953, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_5891, 1, 1, smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_5910) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_5910), (int64_t) 8), (int64_t) 8), n_5770, m_5771, k_5772, num_threads_5956, mem_5941.mem, scan_out_mem_5954);
      |                                                                                                                                                                                                                                                                                                                                                                                                 ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                 |
      |                                                                                                                                                                                                                                                                                                                                                                                                 unsigned char *
tests/soacs/scan8.c:8088:309: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8088 | static int gpu_kernel_mainziscan_stage1_5916(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, gpu_mem arg4, gpu_mem arg5)
      |                                                                                                                                                                                                                                                                                                             ~~~~~~~~^~~~
tests/soacs/scan8.c:8310:352: error: passing argument 14 of ‘gpu_kernel_mainziscan_stage2_5916’ makes integer from pointer without a cast [-Wint-conversion]
 8310 |             err = gpu_kernel_mainziscan_stage2_5916(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_5953, 1, 1, smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_5953) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_5953), (int64_t) 8), (int64_t) 8), n_5770, m_5771, k_5772, stage1_num_tblocks_5953, num_threads_5956, scan_out_mem_5954);
      |                                                                                                                                                                                                                                                                                                                                                                ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                |
      |                                                                                                                                                                                                                                                                                                                                                                unsigned char *
tests/soacs/scan8.c:8098:309: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8098 | static int gpu_kernel_mainziscan_stage2_5916(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, gpu_mem arg5)
      |                                                                                                                                                                                                                                                                                                             ~~~~~~~~^~~~
tests/soacs/scan8.c:8318:264: error: passing argument 17 of ‘gpu_kernel_mainziscan_stage3_5916’ makes integer from pointer without a cast [-Wint-conversion]
 8318 |             err = gpu_kernel_mainziscan_stage3_5916(ctx, num_tblocks_5911, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_5891, 1, 1, (int64_t) 0, n_5770, m_5771, k_5772, num_tblocks_5911, num_threads_5956, required_groups_6009, mem_5945.mem, mem_5949.mem, scan_out_mem_5954);
      |                                                                                                                                                                                                                                                                        ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                        |
      |                                                                                                                                                                                                                                                                        unsigned char *
tests/soacs/scan8.c:8108:351: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8108 | static int gpu_kernel_mainziscan_stage3_5916(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8)
      |                                                                                                                                                                                                                                                                                                                                                       ~~~~~~~~^~~~

If you find this error message confusing, uninformative, or wrong, please open an issue:
  https://github.com/diku-dk/futhark/issues

tests/soacs/scan6.fut:
Compiling with --backend=cuda:
gcc failed with code 1:
tests/soacs/scan6.c: In function ‘futrts_entry_main’:
tests/soacs/scan6.c:8610:359: error: passing argument 23 of ‘gpu_kernel_mainziscan_stage1_6553’ makes integer from pointer without a cast [-Wint-conversion]
 8610 |                 err = gpu_kernel_mainziscan_stage1_6553(ctx, stage1_num_tblocks_6997, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_6539, 1, 1, (int64_t) 0, n_6231, m_6232, k_6233, num_threads_6831, num_threads_6914, binop_y_6925, num_threads_7000, mem_6728.mem, mem_6830.mem, mem_6860.mem, mem_6862.mem, mem_6876.mem, color_6910.mem, color_6911.mem, scan_out_mem_6998);
      |                                                                                                                                                                                                                                                                                                                                                                       ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                                                                                                                                                                                                                                                                                                                                                       unsigned char *
tests/soacs/scan6.c:8163:439: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8163 | static int gpu_kernel_mainziscan_stage1_6553(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int64_t arg5, int32_t arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                               ~~~~~~~~^~~~~
tests/soacs/scan6.c:8617:270: error: passing argument 19 of ‘gpu_kernel_mainziscan_stage2_6553’ makes integer from pointer without a cast [-Wint-conversion]
 8617 |                 err = gpu_kernel_mainziscan_stage2_6553(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_6997, 1, 1, (int64_t) 0, n_6231, m_6232, k_6233, num_threads_6831, num_threads_6914, stage1_num_tblocks_6997, num_threads_7000, mem_6728.mem, mem_6860.mem, mem_6862.mem, scan_out_mem_6998);
      |                                                                                                                                                                                                                                                                              ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                              |
      |                                                                                                                                                                                                                                                                              unsigned char *
tests/soacs/scan6.c:8173:379: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8173 | static int gpu_kernel_mainziscan_stage2_6553(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int64_t arg5, int32_t arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10)
      |                                                                                                                                                                                                                                                                                                                                                                                   ~~~~~~~~^~~~~
tests/soacs/scan6.c:8625:332: error: passing argument 21 of ‘gpu_kernel_mainziscan_stage3_6553’ makes integer from pointer without a cast [-Wint-conversion]
 8625 |                 err = gpu_kernel_mainziscan_stage3_6553(ctx, num_tblocks_6549, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_6539, 1, 1, (int64_t) 0, n_6231, m_6232, k_6233, num_tblocks_6549, num_threads_6831, num_threads_6914, num_threads_7000, required_groups_7084, mem_6860.mem, mem_6862.mem, mem_6872.mem, mem_6876.mem, scan_out_mem_6998);
      |                                                                                                                                                                                                                                                                                                                                            ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                            |
      |                                                                                                                                                                                                                                                                                                                                            unsigned char *
tests/soacs/scan6.c:8183:409: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8183 | static int gpu_kernel_mainziscan_stage3_6553(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int64_t arg5, int32_t arg6, int32_t arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12)
      |                                                                                                                                                                                                                                                                                                                                                                                                                 ~~~~~~~~^~~~~
tests/soacs/scan6.c:8680:389: error: passing argument 14 of ‘gpu_kernel_mainziscan_stage1_6672’ makes integer from pointer without a cast [-Wint-conversion]
 8680 |                 err = gpu_kernel_mainziscan_stage1_6672(ctx, stage1_num_tblocks_7101, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_6581, 1, 1, smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_6666) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_6666), (int64_t) 8), (int64_t) 8), n_6231, m_6232, k_6233, num_threads_7104, mem_6745.mem, scan_out_mem_7102);
      |                                                                                                                                                                                                                                                                                                                                                                                                     ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                     |
      |                                                                                                                                                                                                                                                                                                                                                                                                     unsigned char *
tests/soacs/scan6.c:8193:309: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8193 | static int gpu_kernel_mainziscan_stage1_6672(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, gpu_mem arg4, gpu_mem arg5)
      |                                                                                                                                                                                                                                                                                                             ~~~~~~~~^~~~
tests/soacs/scan6.c:8687:356: error: passing argument 14 of ‘gpu_kernel_mainziscan_stage2_6672’ makes integer from pointer without a cast [-Wint-conversion]
 8687 |                 err = gpu_kernel_mainziscan_stage2_6672(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_7101, 1, 1, smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_7101) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_7101), (int64_t) 8), (int64_t) 8), n_6231, m_6232, k_6233, stage1_num_tblocks_7101, num_threads_7104, scan_out_mem_7102);
      |                                                                                                                                                                                                                                                                                                                                                                    ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                    |
      |                                                                                                                                                                                                                                                                                                                                                                    unsigned char *
tests/soacs/scan6.c:8203:309: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8203 | static int gpu_kernel_mainziscan_stage2_6672(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, gpu_mem arg5)
      |                                                                                                                                                                                                                                                                                                             ~~~~~~~~^~~~
tests/soacs/scan6.c:8695:268: error: passing argument 17 of ‘gpu_kernel_mainziscan_stage3_6672’ makes integer from pointer without a cast [-Wint-conversion]
 8695 |                 err = gpu_kernel_mainziscan_stage3_6672(ctx, num_tblocks_6667, 1, 1, *ctx->tuning_params.mainzisegscan_tblock_sizze_6581, 1, 1, (int64_t) 0, n_6231, m_6232, k_6233, num_tblocks_6667, num_threads_7104, required_groups_7157, mem_6749.mem, mem_6753.mem, scan_out_mem_7102);
      |                                                                                                                                                                                                                                                                            ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                            |
      |                                                                                                                                                                                                                                                                            unsigned char *
tests/soacs/scan6.c:8213:351: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8213 | static int gpu_kernel_mainziscan_stage3_6672(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8)
      |                                                                                                                                                                                                                                                                                                                                                       ~~~~~~~~^~~~

If you find this error message confusing, uninformative, or wrong, please open an issue:
  https://github.com/diku-dk/futhark/issues

tests/soacs/partition1.fut:
Compiling with --backend=cuda:
Running compiled program:
Running ./tests/soacs/partition1 --cache-file tests/soacs/partition1.fut.cache:
Entry point: main; dataset: #0 ("[0i32, 1i32, 2i32, 3i32, 4i32, 5i32, 6i32, 7i32, 8..."):
tests/soacs/partition1.fut.main.0.actual and tests/soacs/partition1.fut.main.0.expected do not match:
Value #1 index [0]: expected 3, got 32702
...and 4 other mismatches.
13 failed, 990 passed, 1359 to go.
13 failed, 1197 passed, 1152 to go.
tests/rosettacode/amicablepairs.fut:
Compiling with --backend=cuda:
Internal compiler error.  Please report this:
  https://github.com/diku-dk/futhark/issues
Type error after pass 'simplify':
In function entry_main
When checking function body
In expression of statement
  {defunc_0_filter_res_7553 : ({}, i64),
   defunc_0_filter_res_7555 : ({}, i64),
   defunc_0_filter_res_7557 : ({defunc_0_filter_res_7559}, [defunc_0_filter_res_7553]i32),
   defunc_0_filter_res_7559 : ({defunc_0_filter_res_7557}, [defunc_0_filter_res_7555]i32)}
in body of last case
In expression of statement
  {scatter_res_7858 : ({}, [d<{(*) upper upper}>_7444]i32),
   scatter_res_7859 : ({}, [d<{(*) upper upper}>_7444]i32)}
Type error:
Anonymous function defined with 4 parameters:
[eta_p_7778 : i64, eta_p_7777 : i64, write_value_7779 : i32, write_value_7780 : i32]
but expected to take 2 arguments.

tests/rosettacode/filter.fut:
Compiling with --backend=cuda:
Running compiled program:
Running ./tests/rosettacode/filter --cache-file tests/rosettacode/filter.fut.cache:
Entry point: main; dataset: #0 ("[1i32, 2i32, 3i32, 4i32, 5i32, 6i32, 7i32, 8i32, 9..."):
tests/rosettacode/filter.fut.main.0.actual and tests/rosettacode/filter.fut.main.0.expected do not match:
Value #0 index [0]: expected 2, got 0
...and 3 other mismatches.
tests/quickmedian.fut:
Compiling with --backend=cuda:
Running compiled program:
Running ./tests/quickmedian --cache-file tests/quickmedian.fut.cache:
Entry point: main; dataset: #1 ("[4i32, -8i32, 2i32, 2i32, 0i32, 0i32, 5i32, 9i32, ..."):
tests/quickmedian.fut.main.1.actual and tests/quickmedian.fut.main.1.expected do not match:
Value #0: expected 0, got 224
tests/issue1435.fut:
Command failed with ExitFailure 1:
./tests/issue1435 --cache-file tests/issue1435.fut.cache
Stderr:
./tests/issue1435: Error during context initialisation:
Index [-1] out of bounds for array of shape [3].
-> #0  tests/issue1435.fut:29:22-27

CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
17 failed, 1388 passed, 957 to go.
tests/psums.fut:
Command failed with ExitFailure 1:
./tests/psums --cache-file tests/psums.fut.cache
Stderr:
./tests/psums: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3909): error: "gtid_6191" has already been declared in the current scope
      int64_t gtid_6191;
              ^

futhark-cuda(3923): error: "gtid_6203" has already been declared in the current scope
      int64_t gtid_6203;
              ^

futhark-cuda(3937): error: "gtid_6215" has already been declared in the current scope
      int64_t gtid_6215;
              ^

3 errors detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/issue814.fut:
Compiling with --backend=cuda:
futhark: internal error: PAP object (0x420320bc78) entered!
Stack trace:
futhark: Failed to get stack frames of current process: No DWARF information found: Success
                 0xbb63e90    set_initial_registers (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)
            0x7f3cce1a2168    dwfl_thread_getframes (/nix/store/qsfx2pvlcapk6aiw3jf21crdx82izd6r-elfutils-0.192/lib/libdw-0.192.so)
            0x7f3cce1a1b9b    get_one_thread_cb (/nix/store/qsfx2pvlcapk6aiw3jf21crdx82izd6r-elfutils-0.192/lib/libdw-0.192.so)
            0x7f3cce1a1f6a    dwfl_getthreads (/nix/store/qsfx2pvlcapk6aiw3jf21crdx82izd6r-elfutils-0.192/lib/libdw-0.192.so)
            0x7f3cce1a24d4    dwfl_getthread_frames (/nix/store/qsfx2pvlcapk6aiw3jf21crdx82izd6r-elfutils-0.192/lib/libdw-0.192.so)
                 0xbb645d1    libdwGetBacktrace (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)
                 0xbb21586    rtsFatalInternalErrorFn (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)
                 0xbb217ba    barf (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)
                 0xbb4cde5    stg_PAP_info (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)

    (GHC version 9.6.6 for x86_64_unknown_linux)
    Please report this as a GHC bug:  https://www.haskell.org/ghc/reportabug

19 failed, 1604 passed, 739 to go.
19 failed, 1859 passed, 484 to go.
tests/ad/issue1879.fut:
Compiling with --backend=cuda:
Warning at tests/ad/issue1879.fut:10:13-18:
  Unused name "sizes".
Internal compiler error (unhandled IO exception).
Please report this at https://github.com/diku-dk/futhark/issues
vjpSOAC unhandled:
scanscatter(n₃_6420,
            {defunc_0_map_res_7026, defunc_0_map_res_7027, eta_p_6922},
            \ {x_6998 : i64,
               x_6999 : i64,
               x_7000 : [3i64]f64}
              : {i64,
                 i64,
                 i64,
                 [3i64]f64} ->
              {x_6998, x_6999, x_6998, x_7000},
            \ {eta_p_6944 : i64,
               eta_p_6945 : i64,
               eta_p_6946 : i64,
               eta_p_6947 : i64}
              : {i64,
                 i64} ->
              let {tmp_6948 : i64} =
                add64(eta_p_6944, eta_p_6946)
              let {tmp_6949 : i64} =
                add64(eta_p_6945, eta_p_6947)
              in {tmp_6948, tmp_6949},
            {0i64, 0i64},
            ([n₃_6420], 1, scatter_arg_ad_copy_7066),
            \ {eta_p_6986 : i64,
               eta_p_6987 : i64,
               eta_p_6985 : i64,
               write_value_6988 : [3i64]f64}
              : {i64,
                 [3i64]f64} ->
              let {cond_6989 : bool} =
                eq_i64(eta_p_6985, 1i64)
              let {lifted_to_index_res_6990 : i64} =
                if cond_6989
                then {
                  let {lifted_to_index_res_t_res_6991 : i64} =
                    sub64(eta_p_6986, 1i64)
                  in {lifted_to_index_res_t_res_6991}
                } else {
                  let {-_lhs_6992 : i64} =
                    add64(eta_p_6987, defunc_0_reduce_comm_res_7025)
                  let {lifted_to_index_res_f_res_6993 : i64} =
                    sub64(-_lhs_6992, 1i64)
                  in {lifted_to_index_res_f_res_6993}
                }
                : {i64}
              in {lifted_to_index_res_6990, write_value_6988})
CallStack (from HasCallStack):
  error, called at src/Futhark/AD/Rev/SOAC.hs:199:3 in futhark-0.26.0-inplace:Futhark.AD.Rev.SOAC
CallStack (from -prof):
  Futhark.AD.Rev.SOAC.vjpSOAC (src/Futhark/AD/Rev/SOAC.hs:(74,1)-(199,53))
  Futhark.AD.Rev.diffStm (src/Futhark/AD/Rev.hs:(217,1)-(296,66))
  Futhark.AD.Rev.diffStms (src/Futhark/AD/Rev.hs:(299,1)-(307,13))
  Futhark.AD.Rev.Monad.>> (src/Futhark/AD/Rev/Monad.hs:201:7-11)
  Futhark.Builder.>> (src/Futhark/Builder.hs:86:22-26)
  Futhark.Builder.>>= (src/Futhark/Builder.hs:86:22-26)
  Futhark.Builder.collectStms (src/Futhark/Builder.hs:(133,3)-(139,22))
  Futhark.AD.Rev.Monad.collectStms (src/Futhark/AD/Rev/Monad.hs:215:3-43)
  Futhark.AD.Rev.Monad.subSubsts (src/Futhark/AD/Rev/Monad.hs:(503,1)-(507,8))
  Futhark.AD.Rev.Monad.subAD (src/Futhark/AD/Rev/Monad.hs:(496,1)-(500,8))
  Futhark.AD.Rev.diffBody (src/Futhark/AD/Rev.hs:(315,1)-(323,46))
  Futhark.AD.Rev.Monad.>>= (src/Futhark/AD/Rev/Monad.hs:201:7-11)
  Futhark.Builder.localScope (src/Futhark/Builder.hs:(113,3)-(117,10))
  Futhark.AD.Rev.Monad.localScope (src/Futhark/AD/Rev/Monad.hs:205:7-22)
  Futhark.Builder.runBuilderT (src/Futhark/Builder.hs:(148,1)-(150,16))
  Futhark.AD.Rev.Monad.runADM (src/Futhark/AD/Rev/Monad.hs:(222,1)-(227,40))
  Futhark.AD.Rev.revVJP (src/Futhark/AD/Rev.hs:(334,1)-(346,75))
  Futhark.Pass.AD.onStm (src/Futhark/Pass/AD.hs:(39,1)-(60,76))
  Futhark.Pass.liftA2 (src/Futhark/Pass.hs:27:22-32)
  Futhark.Pass.AD.onStms (src/Futhark/Pass/AD.hs:(63,1)-(65,34))
  Futhark.Pass.AD.onBody (src/Futhark/Pass/AD.hs:(68,1)-(70,31))
  Futhark.Pass.AD.onFun (src/Futhark/Pass/AD.hs:(78,1)-(80,31))
  Futhark.MonadFreshNames.modifyNameSource (src/Futhark/MonadFreshNames.hs:(73,1)-(77,8))
  Futhark.Pass.parPass (src/Futhark/Pass.hs:(69,1)-(79,25))
  Futhark.Pass.intraproceduralTransformationWithConsts (src/Futhark/Pass.hs:(91,1)-(94,54))
  Futhark.Pass.AD.applyAD (src/Futhark/Pass/AD.hs:(83,1)-(91,5))
  Futhark.Pass.passFunction (src/Futhark/Pass.hs:54:5-16)
  Futhark.Pass.runPassM (src/Futhark/Pass.hs:42:1-63)
  Futhark.Pipeline.runPass (src/Futhark/Pipeline.hs:(216,1)-(220,12))
  Futhark.Pipeline.onePass (src/Futhark/Pipeline.hs:(159,1)-(183,28))
  Futhark.Pipeline.passes (src/Futhark/Pipeline.hs:199:1-37)
  Futhark.Passes.standardPipeline (src/Futhark/Passes.hs:(53,1)-(67,38))
  Futhark.Pipeline.id (src/Futhark/Pipeline.hs:137:3-48)
  Futhark.Pipeline.. (src/Futhark/Pipeline.hs:(138,3)-(142,30))
  Futhark.Passes.gpumemPipeline (src/Futhark/Passes.hs:(146,1)-(170,7))
  Futhark.Pipeline.runPipeline (src/Futhark/Pipeline.hs:(150,1)-(152,9))
  Futhark.Compiler.runPipelineOnProgram (src/Futhark/Compiler.hs:(107,1)-(126,9))
  Futhark.Pipeline.runFutharkM (src/Futhark/Pipeline.hs:(95,1)-(97,47))
  Futhark.Compiler.runCompilerOnProgram (src/Futhark/Compiler.hs:(82,1)-(98,34))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.Compiler.CLI.compilerMain (src/Futhark/Compiler/CLI.hs:(49,1)-(76,9))
  Futhark.CLI.CUDA.main (src/Futhark/CLI/CUDA.hs:(10,1)-(17,62))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))

tests/ad/issue2256.fut:
Command failed with ExitFailure 1:
./tests/ad/issue2256 --cache-file tests/ad/issue2256.fut.cache
Stderr:
./tests/ad/issue2256: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4045): error: "gtid_6517" has already been declared in the current scope
      int64_t gtid_6517;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/ad/scan0.fut:
Command failed with ExitFailure 1:
./tests/ad/scan0 --cache-file tests/ad/scan0.fut.cache
Stderr:
./tests/ad/scan0: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4862): error: "gtid_6664" has already been declared in the current scope
      int64_t gtid_6664;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/ad/scan5.fut:
Compiling with --backend=cuda:
gcc failed with code 1:
tests/ad/scan5.c: In function ‘futrts_entry_fwd_J’:
tests/ad/scan5.c:8898:577: error: passing argument 14 of ‘gpu_kernel_fwd_Jziscan_stage1_7031’ makes integer from pointer without a cast [-Wint-conversion]
 8898 |             err = gpu_kernel_fwd_Jziscan_stage1_7031(ctx, stage1_num_tblocks_8339, 1, 1, *ctx->tuning_params.fwd_Jzisegscan_tblock_sizze_6941, 1, 1, smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_7024) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_7024), (int64_t) 8), (int64_t) 8) + (smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_7024) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_7024), (int64_t) 8), (int64_t) 8)), n_6372, k_6373, num_threads_8344, mem_8010.mem, mem_8027.mem, scan_out_mem_8340, scan_out_mem_8342);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 unsigned char *
tests/ad/scan5.c:8355:310: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8355 | static int gpu_kernel_fwd_Jziscan_stage1_7031(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int32_t arg2, gpu_mem arg3, gpu_mem arg4, gpu_mem arg5, gpu_mem arg6)
      |                                                                                                                                                                                                                                                                                                              ~~~~~~~~^~~~
tests/ad/scan5.c:8898:596: error: passing argument 15 of ‘gpu_kernel_fwd_Jziscan_stage1_7031’ makes integer from pointer without a cast [-Wint-conversion]
 8898 |             err = gpu_kernel_fwd_Jziscan_stage1_7031(ctx, stage1_num_tblocks_8339, 1, 1, *ctx->tuning_params.fwd_Jzisegscan_tblock_sizze_6941, 1, 1, smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_7024) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_7024), (int64_t) 8), (int64_t) 8) + (smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_7024) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_7024), (int64_t) 8), (int64_t) 8)), n_6372, k_6373, num_threads_8344, mem_8010.mem, mem_8027.mem, scan_out_mem_8340, scan_out_mem_8342);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    unsigned char *
tests/ad/scan5.c:8355:324: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8355 | static int gpu_kernel_fwd_Jziscan_stage1_7031(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int32_t arg2, gpu_mem arg3, gpu_mem arg4, gpu_mem arg5, gpu_mem arg6)
      |                                                                                                                                                                                                                                                                                                                            ~~~~~~~~^~~~
tests/ad/scan5.c:8905:525: error: passing argument 13 of ‘gpu_kernel_fwd_Jziscan_stage2_7031’ makes integer from pointer without a cast [-Wint-conversion]
 8905 |             err = gpu_kernel_fwd_Jziscan_stage2_7031(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_8339, 1, 1, smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_8339) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_8339), (int64_t) 8), (int64_t) 8) + (smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_8339) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_8339), (int64_t) 8), (int64_t) 8)), n_6372, k_6373, stage1_num_tblocks_8339, num_threads_8344, scan_out_mem_8340, scan_out_mem_8342);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             unsigned char *
tests/ad/scan5.c:8365:296: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8365 | static int gpu_kernel_fwd_Jziscan_stage2_7031(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, gpu_mem arg4, gpu_mem arg5)
      |                                                                                                                                                                                                                                                                                                ~~~~~~~~^~~~
tests/ad/scan5.c:8905:544: error: passing argument 14 of ‘gpu_kernel_fwd_Jziscan_stage2_7031’ makes integer from pointer without a cast [-Wint-conversion]
 8905 |             err = gpu_kernel_fwd_Jziscan_stage2_7031(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_8339, 1, 1, smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_8339) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_8339), (int64_t) 8), (int64_t) 8) + (smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_8339) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_8339), (int64_t) 8), (int64_t) 8)), n_6372, k_6373, stage1_num_tblocks_8339, num_threads_8344, scan_out_mem_8340, scan_out_mem_8342);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                unsigned char *
tests/ad/scan5.c:8365:310: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8365 | static int gpu_kernel_fwd_Jziscan_stage2_7031(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, gpu_mem arg4, gpu_mem arg5)
      |                                                                                                                                                                                                                                                                                                              ~~~~~~~~^~~~
tests/ad/scan5.c:8913:286: error: passing argument 18 of ‘gpu_kernel_fwd_Jziscan_stage3_7031’ makes integer from pointer without a cast [-Wint-conversion]
 8913 |             err = gpu_kernel_fwd_Jziscan_stage3_7031(ctx, num_tblocks_7025, 1, 1, *ctx->tuning_params.fwd_Jzisegscan_tblock_sizze_6941, 1, 1, (int64_t) 0, n_6372, k_6373, num_tblocks_7025, num_threads_8344, required_groups_8419, mem_8031.mem, mem_8034.mem, mem_8038.mem, mem_8042.mem, scan_out_mem_8340, scan_out_mem_8342);
      |                                                                                                                                                                                                                                                                                              ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                              |
      |                                                                                                                                                                                                                                                                                              unsigned char *
tests/ad/scan5.c:8375:366: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8375 | static int gpu_kernel_fwd_Jziscan_stage3_7031(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10)
      |                                                                                                                                                                                                                                                                                                                                                                      ~~~~~~~~^~~~
tests/ad/scan5.c:8913:305: error: passing argument 19 of ‘gpu_kernel_fwd_Jziscan_stage3_7031’ makes integer from pointer without a cast [-Wint-conversion]
 8913 |             err = gpu_kernel_fwd_Jziscan_stage3_7031(ctx, num_tblocks_7025, 1, 1, *ctx->tuning_params.fwd_Jzisegscan_tblock_sizze_6941, 1, 1, (int64_t) 0, n_6372, k_6373, num_tblocks_7025, num_threads_8344, required_groups_8419, mem_8031.mem, mem_8034.mem, mem_8038.mem, mem_8042.mem, scan_out_mem_8340, scan_out_mem_8342);
      |                                                                                                                                                                                                                                                                                                                 ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                 |
      |                                                                                                                                                                                                                                                                                                                 unsigned char *
tests/ad/scan5.c:8375:380: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8375 | static int gpu_kernel_fwd_Jziscan_stage3_7031(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10)
      |                                                                                                                                                                                                                                                                                                                                                                                    ~~~~~~~~^~~~~

If you find this error message confusing, uninformative, or wrong, please open an issue:
  https://github.com/diku-dk/futhark/issues

tests/ad/reducebyindex5.fut:
Command failed with ExitFailure 1:
./tests/ad/reducebyindex5 --cache-file tests/ad/reducebyindex5.fut.cache
Stderr:
./tests/ad/reducebyindex5: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(8347): error: "gtid_7601" has already been declared in the current scope
      int64_t gtid_7601;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/ad/scan3.fut:
Command failed with ExitFailure 1:
./tests/ad/scan3 --cache-file tests/ad/scan3.fut.cache
Stderr:
./tests/ad/scan3: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4630): error: "gtid_11417" has already been declared in the current scope
      int64_t gtid_11417;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/ad/scan1.fut:
Command failed with ExitFailure 1:
./tests/ad/scan1 --cache-file tests/ad/scan1.fut.cache
Stderr:
./tests/ad/scan1: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4684): error: "gtid_6578" has already been declared in the current scope
      int64_t gtid_6578;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
26 failed, 1985 passed, 351 to go.
tests/ad/scan7.fut:
Compiling with --backend=cuda:
gcc failed with code 1:
tests/ad/scan7.c: In function ‘futrts_entry_fwd_J’:
tests/ad/scan7.c:9673:598: error: passing argument 15 of ‘gpu_kernel_fwd_Jziscan_stage1_22193’ makes integer from pointer without a cast [-Wint-conversion]
 9673 |             err = gpu_kernel_fwd_Jziscan_stage1_22193(ctx, stage1_num_tblocks_28510, 1, 1, *ctx->tuning_params.fwd_Jzisegscan_tblock_sizze_21745, 1, 1, smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_22184) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_22184), (int64_t) 8), (int64_t) 8) + (smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_22184) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_22184), (int64_t) 8), (int64_t) 8)), n_11741, m_11742, k_11743, num_threads_28515, mem_26617.mem, mem_26658.mem, scan_out_mem_28511, scan_out_mem_28513);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      unsigned char *
tests/ad/scan7.c:8804:325: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8804 | static int gpu_kernel_fwd_Jziscan_stage1_22193(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, gpu_mem arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7)
      |                                                                                                                                                                                                                                                                                                                             ~~~~~~~~^~~~
tests/ad/scan7.c:9673:618: error: passing argument 16 of ‘gpu_kernel_fwd_Jziscan_stage1_22193’ makes integer from pointer without a cast [-Wint-conversion]
 9673 |             err = gpu_kernel_fwd_Jziscan_stage1_22193(ctx, stage1_num_tblocks_28510, 1, 1, *ctx->tuning_params.fwd_Jzisegscan_tblock_sizze_21745, 1, 1, smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_22184) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_22184), (int64_t) 8), (int64_t) 8) + (smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_22184) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_22184), (int64_t) 8), (int64_t) 8)), n_11741, m_11742, k_11743, num_threads_28515, mem_26617.mem, mem_26658.mem, scan_out_mem_28511, scan_out_mem_28513);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          unsigned char *
tests/ad/scan7.c:8804:339: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8804 | static int gpu_kernel_fwd_Jziscan_stage1_22193(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, gpu_mem arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7)
      |                                                                                                                                                                                                                                                                                                                                           ~~~~~~~~^~~~
tests/ad/scan7.c:9680:544: error: passing argument 14 of ‘gpu_kernel_fwd_Jziscan_stage2_22193’ makes integer from pointer without a cast [-Wint-conversion]
 9680 |             err = gpu_kernel_fwd_Jziscan_stage2_22193(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_28510, 1, 1, smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_28510) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_28510), (int64_t) 8), (int64_t) 8) + (smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_28510) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_28510), (int64_t) 8), (int64_t) 8)), n_11741, m_11742, k_11743, stage1_num_tblocks_28510, num_threads_28515, scan_out_mem_28511, scan_out_mem_28513);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                unsigned char *
tests/ad/scan7.c:8814:311: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8814 | static int gpu_kernel_fwd_Jziscan_stage2_22193(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6)
      |                                                                                                                                                                                                                                                                                                               ~~~~~~~~^~~~
tests/ad/scan7.c:9680:564: error: passing argument 15 of ‘gpu_kernel_fwd_Jziscan_stage2_22193’ makes integer from pointer without a cast [-Wint-conversion]
 9680 |             err = gpu_kernel_fwd_Jziscan_stage2_22193(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_28510, 1, 1, smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_28510) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_28510), (int64_t) 8), (int64_t) 8) + (smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_28510) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_28510), (int64_t) 8), (int64_t) 8)), n_11741, m_11742, k_11743, stage1_num_tblocks_28510, num_threads_28515, scan_out_mem_28511, scan_out_mem_28513);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    unsigned char *
tests/ad/scan7.c:8814:325: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8814 | static int gpu_kernel_fwd_Jziscan_stage2_22193(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6)
      |                                                                                                                                                                                                                                                                                                                             ~~~~~~~~^~~~
tests/ad/scan7.c:9688:307: error: passing argument 19 of ‘gpu_kernel_fwd_Jziscan_stage3_22193’ makes integer from pointer without a cast [-Wint-conversion]
 9688 |             err = gpu_kernel_fwd_Jziscan_stage3_22193(ctx, num_tblocks_22185, 1, 1, *ctx->tuning_params.fwd_Jzisegscan_tblock_sizze_21745, 1, 1, (int64_t) 0, n_11741, m_11742, k_11743, num_tblocks_22185, num_threads_28515, required_groups_28592, mem_26663.mem, mem_26667.mem, mem_26674.mem, mem_26681.mem, scan_out_mem_28511, scan_out_mem_28513);
      |                                                                                                                                                                                                                                                                                                                   ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                   |
      |                                                                                                                                                                                                                                                                                                                   unsigned char *
tests/ad/scan7.c:8824:381: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8824 | static int gpu_kernel_fwd_Jziscan_stage3_22193(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11)
      |                                                                                                                                                                                                                                                                                                                                                                                     ~~~~~~~~^~~~~
tests/ad/scan7.c:9688:327: error: passing argument 20 of ‘gpu_kernel_fwd_Jziscan_stage3_22193’ makes integer from pointer without a cast [-Wint-conversion]
 9688 |             err = gpu_kernel_fwd_Jziscan_stage3_22193(ctx, num_tblocks_22185, 1, 1, *ctx->tuning_params.fwd_Jzisegscan_tblock_sizze_21745, 1, 1, (int64_t) 0, n_11741, m_11742, k_11743, num_tblocks_22185, num_threads_28515, required_groups_28592, mem_26663.mem, mem_26667.mem, mem_26674.mem, mem_26681.mem, scan_out_mem_28511, scan_out_mem_28513);
      |                                                                                                                                                                                                                                                                                                                                       ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                       |
      |                                                                                                                                                                                                                                                                                                                                       unsigned char *
tests/ad/scan7.c:8824:396: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8824 | static int gpu_kernel_fwd_Jziscan_stage3_22193(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11)
      |                                                                                                                                                                                                                                                                                                                                                                                                    ~~~~~~~~^~~~~

If you find this error message confusing, uninformative, or wrong, please open an issue:
  https://github.com/diku-dk/futhark/issues

tests/ad/scan4.fut:
Command failed with ExitFailure 1:
./tests/ad/scan4 --cache-file tests/ad/scan4.fut.cache
Stderr:
./tests/ad/scan4: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4430): error: "gtid_8822" has already been declared in the current scope
      int64_t gtid_8822;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/ad/scan2.fut:
Compiling with --backend=cuda:
gcc failed with code 1:
tests/ad/scan2.c: In function ‘futrts_entry_fwd_J’:
tests/ad/scan2.c:8744:379: error: passing argument 13 of ‘gpu_kernel_fwd_Jziscan_stage1_6966’ makes integer from pointer without a cast [-Wint-conversion]
 8744 |             err = gpu_kernel_fwd_Jziscan_stage1_6966(ctx, stage1_num_tblocks_7509, 1, 1, *ctx->tuning_params.fwd_Jzisegscan_tblock_sizze_6885, 1, 1, smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_6960) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_6960), (int64_t) 8), (int64_t) 8), n_6372, k_6373, num_threads_7512, mem_7412.mem, scan_out_mem_7510);
      |                                                                                                                                                                                                                                                                                                                                                                                           ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                           |
      |                                                                                                                                                                                                                                                                                                                                                                                           unsigned char *
tests/ad/scan2.c:8273:296: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8273 | static int gpu_kernel_fwd_Jziscan_stage1_6966(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int32_t arg2, gpu_mem arg3, gpu_mem arg4)
      |                                                                                                                                                                                                                                                                                                ~~~~~~~~^~~~
tests/ad/scan2.c:8751:345: error: passing argument 13 of ‘gpu_kernel_fwd_Jziscan_stage2_6966’ makes integer from pointer without a cast [-Wint-conversion]
 8751 |             err = gpu_kernel_fwd_Jziscan_stage2_6966(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_7509, 1, 1, smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_7509) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_7509), (int64_t) 8), (int64_t) 8), n_6372, k_6373, stage1_num_tblocks_7509, num_threads_7512, scan_out_mem_7510);
      |                                                                                                                                                                                                                                                                                                                                                         ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                         |
      |                                                                                                                                                                                                                                                                                                                                                         unsigned char *
tests/ad/scan2.c:8283:296: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8283 | static int gpu_kernel_fwd_Jziscan_stage2_6966(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, gpu_mem arg4)
      |                                                                                                                                                                                                                                                                                                ~~~~~~~~^~~~
tests/ad/scan2.c:8759:258: error: passing argument 16 of ‘gpu_kernel_fwd_Jziscan_stage3_6966’ makes integer from pointer without a cast [-Wint-conversion]
 8759 |             err = gpu_kernel_fwd_Jziscan_stage3_6966(ctx, num_tblocks_6961, 1, 1, *ctx->tuning_params.fwd_Jzisegscan_tblock_sizze_6885, 1, 1, (int64_t) 0, n_6372, k_6373, num_tblocks_6961, num_threads_7512, required_groups_7565, mem_7416.mem, mem_7420.mem, scan_out_mem_7510);
      |                                                                                                                                                                                                                                                                  ^~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                  |
      |                                                                                                                                                                                                                                                                  unsigned char *
tests/ad/scan2.c:8293:338: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 8293 | static int gpu_kernel_fwd_Jziscan_stage3_6966(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7)
      |                                                                                                                                                                                                                                                                                                                                          ~~~~~~~~^~~~

If you find this error message confusing, uninformative, or wrong, please open an issue:
  https://github.com/diku-dk/futhark/issues

tests/ad/scangenbenchtests.fut:
Command failed with ExitFailure 1:
./tests/ad/scangenbenchtests --cache-file tests/ad/scangenbenchtests.fut.cache
Stderr:
./tests/ad/scangenbenchtests: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4708): error: "gtid_70712" has already been declared in the current scope
      int64_t gtid_70712;
              ^

futhark-cuda(10232): error: "gtid_72099" has already been declared in the current scope
      int64_t gtid_72099;
              ^

futhark-cuda(17701): error: "gtid_60749" has already been declared in the current scope
      int64_t gtid_60749;
              ^

futhark-cuda(25098): error: "gtid_62643" has already been declared in the current scope
      int64_t gtid_62643;
              ^

futhark-cuda(37393): error: "gtid_66085" has already been declared in the current scope
      int64_t gtid_66085;
              ^

5 errors detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/ad/reducebyindex1.fut:
Compiling with --backend=cuda:
gcc failed with code 1:
tests/ad/reducebyindex1.c: In function ‘futrts_entry_revvec’:
tests/ad/reducebyindex1.c:12049:578: error: passing argument 27 of ‘gpu_kernel_revvecziscan_stage1_10639’ makes integer from pointer without a cast [-Wint-conversion]
12049 |             err = gpu_kernel_revvecziscan_stage1_10639(ctx, stage1_num_tblocks_12001, 1, 1, *ctx->tuning_params.revveczisegscan_tblock_sizze_10633, 1, 1, smax64((int64_t) 1, segscan_tblock_sizze_10634) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, segscan_tblock_sizze_10634), (int64_t) 8), (int64_t) 8), n_8215, m_8216, num_threads_11084, num_threads_11278, num_threads_12014, mem_10974.mem, mem_10976.mem, mem_11061.mem, mem_11072.mem, mem_11083.mem, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  unsigned char *
tests/ad/reducebyindex1.c:9049:502: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9049 | static int gpu_kernel_revvecziscan_stage1_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21, gpu_mem arg22, gpu_mem arg23)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12049:598: error: passing argument 28 of ‘gpu_kernel_revvecziscan_stage1_10639’ makes integer from pointer without a cast [-Wint-conversion]
12049 |             err = gpu_kernel_revvecziscan_stage1_10639(ctx, stage1_num_tblocks_12001, 1, 1, *ctx->tuning_params.revveczisegscan_tblock_sizze_10633, 1, 1, smax64((int64_t) 1, segscan_tblock_sizze_10634) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, segscan_tblock_sizze_10634), (int64_t) 8), (int64_t) 8), n_8215, m_8216, num_threads_11084, num_threads_11278, num_threads_12014, mem_10974.mem, mem_10976.mem, mem_11061.mem, mem_11072.mem, mem_11083.mem, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      unsigned char *
tests/ad/reducebyindex1.c:9049:517: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9049 | static int gpu_kernel_revvecziscan_stage1_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21, gpu_mem arg22, gpu_mem arg23)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12049:618: error: passing argument 29 of ‘gpu_kernel_revvecziscan_stage1_10639’ makes integer from pointer without a cast [-Wint-conversion]
12049 |             err = gpu_kernel_revvecziscan_stage1_10639(ctx, stage1_num_tblocks_12001, 1, 1, *ctx->tuning_params.revveczisegscan_tblock_sizze_10633, 1, 1, smax64((int64_t) 1, segscan_tblock_sizze_10634) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, segscan_tblock_sizze_10634), (int64_t) 8), (int64_t) 8), n_8215, m_8216, num_threads_11084, num_threads_11278, num_threads_12014, mem_10974.mem, mem_10976.mem, mem_11061.mem, mem_11072.mem, mem_11083.mem, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          unsigned char *
tests/ad/reducebyindex1.c:9049:532: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9049 | static int gpu_kernel_revvecziscan_stage1_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21, gpu_mem arg22, gpu_mem arg23)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12049:638: error: passing argument 30 of ‘gpu_kernel_revvecziscan_stage1_10639’ makes integer from pointer without a cast [-Wint-conversion]
12049 |             err = gpu_kernel_revvecziscan_stage1_10639(ctx, stage1_num_tblocks_12001, 1, 1, *ctx->tuning_params.revveczisegscan_tblock_sizze_10633, 1, 1, smax64((int64_t) 1, segscan_tblock_sizze_10634) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, segscan_tblock_sizze_10634), (int64_t) 8), (int64_t) 8), n_8215, m_8216, num_threads_11084, num_threads_11278, num_threads_12014, mem_10974.mem, mem_10976.mem, mem_11061.mem, mem_11072.mem, mem_11083.mem, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              unsigned char *
tests/ad/reducebyindex1.c:9049:547: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9049 | static int gpu_kernel_revvecziscan_stage1_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21, gpu_mem arg22, gpu_mem arg23)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12049:658: error: passing argument 31 of ‘gpu_kernel_revvecziscan_stage1_10639’ makes integer from pointer without a cast [-Wint-conversion]
12049 |             err = gpu_kernel_revvecziscan_stage1_10639(ctx, stage1_num_tblocks_12001, 1, 1, *ctx->tuning_params.revveczisegscan_tblock_sizze_10633, 1, 1, smax64((int64_t) 1, segscan_tblock_sizze_10634) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, segscan_tblock_sizze_10634), (int64_t) 8), (int64_t) 8), n_8215, m_8216, num_threads_11084, num_threads_11278, num_threads_12014, mem_10974.mem, mem_10976.mem, mem_11061.mem, mem_11072.mem, mem_11083.mem, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  unsigned char *
tests/ad/reducebyindex1.c:9049:562: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9049 | static int gpu_kernel_revvecziscan_stage1_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21, gpu_mem arg22, gpu_mem arg23)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12049:678: error: passing argument 32 of ‘gpu_kernel_revvecziscan_stage1_10639’ makes integer from pointer without a cast [-Wint-conversion]
12049 |             err = gpu_kernel_revvecziscan_stage1_10639(ctx, stage1_num_tblocks_12001, 1, 1, *ctx->tuning_params.revveczisegscan_tblock_sizze_10633, 1, 1, smax64((int64_t) 1, segscan_tblock_sizze_10634) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, segscan_tblock_sizze_10634), (int64_t) 8), (int64_t) 8), n_8215, m_8216, num_threads_11084, num_threads_11278, num_threads_12014, mem_10974.mem, mem_10976.mem, mem_11061.mem, mem_11072.mem, mem_11083.mem, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      unsigned char *
tests/ad/reducebyindex1.c:9049:577: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9049 | static int gpu_kernel_revvecziscan_stage1_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21, gpu_mem arg22, gpu_mem arg23)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12056:512: error: passing argument 25 of ‘gpu_kernel_revvecziscan_stage2_10639’ makes integer from pointer without a cast [-Wint-conversion]
12056 |             err = gpu_kernel_revvecziscan_stage2_10639(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_12001, 1, 1, smax64((int64_t) 1, stage1_num_tblocks_12001) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, stage1_num_tblocks_12001), (int64_t) 8), (int64_t) 8), n_8215, m_8216, num_threads_11084, num_threads_11278, stage1_num_tblocks_12001, num_threads_12014, mem_10974.mem, mem_10976.mem, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                unsigned char *
tests/ad/reducebyindex1.c:9059:472: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9059 | static int gpu_kernel_revvecziscan_stage2_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12056:532: error: passing argument 26 of ‘gpu_kernel_revvecziscan_stage2_10639’ makes integer from pointer without a cast [-Wint-conversion]
12056 |             err = gpu_kernel_revvecziscan_stage2_10639(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_12001, 1, 1, smax64((int64_t) 1, stage1_num_tblocks_12001) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, stage1_num_tblocks_12001), (int64_t) 8), (int64_t) 8), n_8215, m_8216, num_threads_11084, num_threads_11278, stage1_num_tblocks_12001, num_threads_12014, mem_10974.mem, mem_10976.mem, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    unsigned char *
tests/ad/reducebyindex1.c:9059:487: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9059 | static int gpu_kernel_revvecziscan_stage2_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12056:552: error: passing argument 27 of ‘gpu_kernel_revvecziscan_stage2_10639’ makes integer from pointer without a cast [-Wint-conversion]
12056 |             err = gpu_kernel_revvecziscan_stage2_10639(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_12001, 1, 1, smax64((int64_t) 1, stage1_num_tblocks_12001) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, stage1_num_tblocks_12001), (int64_t) 8), (int64_t) 8), n_8215, m_8216, num_threads_11084, num_threads_11278, stage1_num_tblocks_12001, num_threads_12014, mem_10974.mem, mem_10976.mem, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        unsigned char *
tests/ad/reducebyindex1.c:9059:502: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9059 | static int gpu_kernel_revvecziscan_stage2_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12056:572: error: passing argument 28 of ‘gpu_kernel_revvecziscan_stage2_10639’ makes integer from pointer without a cast [-Wint-conversion]
12056 |             err = gpu_kernel_revvecziscan_stage2_10639(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_12001, 1, 1, smax64((int64_t) 1, stage1_num_tblocks_12001) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, stage1_num_tblocks_12001), (int64_t) 8), (int64_t) 8), n_8215, m_8216, num_threads_11084, num_threads_11278, stage1_num_tblocks_12001, num_threads_12014, mem_10974.mem, mem_10976.mem, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            unsigned char *
tests/ad/reducebyindex1.c:9059:517: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9059 | static int gpu_kernel_revvecziscan_stage2_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12056:592: error: passing argument 29 of ‘gpu_kernel_revvecziscan_stage2_10639’ makes integer from pointer without a cast [-Wint-conversion]
12056 |             err = gpu_kernel_revvecziscan_stage2_10639(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_12001, 1, 1, smax64((int64_t) 1, stage1_num_tblocks_12001) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, stage1_num_tblocks_12001), (int64_t) 8), (int64_t) 8), n_8215, m_8216, num_threads_11084, num_threads_11278, stage1_num_tblocks_12001, num_threads_12014, mem_10974.mem, mem_10976.mem, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                unsigned char *
tests/ad/reducebyindex1.c:9059:532: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9059 | static int gpu_kernel_revvecziscan_stage2_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12056:612: error: passing argument 30 of ‘gpu_kernel_revvecziscan_stage2_10639’ makes integer from pointer without a cast [-Wint-conversion]
12056 |             err = gpu_kernel_revvecziscan_stage2_10639(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_12001, 1, 1, smax64((int64_t) 1, stage1_num_tblocks_12001) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, stage1_num_tblocks_12001), (int64_t) 8), (int64_t) 8), n_8215, m_8216, num_threads_11084, num_threads_11278, stage1_num_tblocks_12001, num_threads_12014, mem_10974.mem, mem_10976.mem, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    unsigned char *
tests/ad/reducebyindex1.c:9059:547: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9059 | static int gpu_kernel_revvecziscan_stage2_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12064:546: error: passing argument 34 of ‘gpu_kernel_revvecziscan_stage3_10639’ makes integer from pointer without a cast [-Wint-conversion]
12064 |             err = gpu_kernel_revvecziscan_stage3_10639(ctx, num_tblocks_10636, 1, 1, *ctx->tuning_params.revveczisegscan_tblock_sizze_10633, 1, 1, (int64_t) 0, n_8215, m_8216, num_tblocks_10636, num_threads_11084, num_threads_11278, num_threads_12014, required_groups_12351, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, mem_11173.mem, mem_11176.mem, mem_11179.mem, mem_11182.mem, mem_11183.mem, mem_11186.mem, mem_11189.mem, mem_11190.mem, mem_11193.mem, mem_11196.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  unsigned char *
tests/ad/reducebyindex1.c:9069:607: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9069 | static int gpu_kernel_revvecziscan_stage3_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, int32_t arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21, gpu_mem arg22, gpu_mem arg23, gpu_mem arg24, gpu_mem arg25, gpu_mem arg26, gpu_mem arg27, gpu_mem arg28, gpu_mem arg29, gpu_mem arg30)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12064:566: error: passing argument 35 of ‘gpu_kernel_revvecziscan_stage3_10639’ makes integer from pointer without a cast [-Wint-conversion]
12064 |             err = gpu_kernel_revvecziscan_stage3_10639(ctx, num_tblocks_10636, 1, 1, *ctx->tuning_params.revveczisegscan_tblock_sizze_10633, 1, 1, (int64_t) 0, n_8215, m_8216, num_tblocks_10636, num_threads_11084, num_threads_11278, num_threads_12014, required_groups_12351, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, mem_11173.mem, mem_11176.mem, mem_11179.mem, mem_11182.mem, mem_11183.mem, mem_11186.mem, mem_11189.mem, mem_11190.mem, mem_11193.mem, mem_11196.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      unsigned char *
tests/ad/reducebyindex1.c:9069:622: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9069 | static int gpu_kernel_revvecziscan_stage3_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, int32_t arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21, gpu_mem arg22, gpu_mem arg23, gpu_mem arg24, gpu_mem arg25, gpu_mem arg26, gpu_mem arg27, gpu_mem arg28, gpu_mem arg29, gpu_mem arg30)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12064:586: error: passing argument 36 of ‘gpu_kernel_revvecziscan_stage3_10639’ makes integer from pointer without a cast [-Wint-conversion]
12064 |             err = gpu_kernel_revvecziscan_stage3_10639(ctx, num_tblocks_10636, 1, 1, *ctx->tuning_params.revveczisegscan_tblock_sizze_10633, 1, 1, (int64_t) 0, n_8215, m_8216, num_tblocks_10636, num_threads_11084, num_threads_11278, num_threads_12014, required_groups_12351, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, mem_11173.mem, mem_11176.mem, mem_11179.mem, mem_11182.mem, mem_11183.mem, mem_11186.mem, mem_11189.mem, mem_11190.mem, mem_11193.mem, mem_11196.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          unsigned char *
tests/ad/reducebyindex1.c:9069:637: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9069 | static int gpu_kernel_revvecziscan_stage3_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, int32_t arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21, gpu_mem arg22, gpu_mem arg23, gpu_mem arg24, gpu_mem arg25, gpu_mem arg26, gpu_mem arg27, gpu_mem arg28, gpu_mem arg29, gpu_mem arg30)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12064:606: error: passing argument 37 of ‘gpu_kernel_revvecziscan_stage3_10639’ makes integer from pointer without a cast [-Wint-conversion]
12064 |             err = gpu_kernel_revvecziscan_stage3_10639(ctx, num_tblocks_10636, 1, 1, *ctx->tuning_params.revveczisegscan_tblock_sizze_10633, 1, 1, (int64_t) 0, n_8215, m_8216, num_tblocks_10636, num_threads_11084, num_threads_11278, num_threads_12014, required_groups_12351, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, mem_11173.mem, mem_11176.mem, mem_11179.mem, mem_11182.mem, mem_11183.mem, mem_11186.mem, mem_11189.mem, mem_11190.mem, mem_11193.mem, mem_11196.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              unsigned char *
tests/ad/reducebyindex1.c:9069:652: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9069 | static int gpu_kernel_revvecziscan_stage3_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, int32_t arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21, gpu_mem arg22, gpu_mem arg23, gpu_mem arg24, gpu_mem arg25, gpu_mem arg26, gpu_mem arg27, gpu_mem arg28, gpu_mem arg29, gpu_mem arg30)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12064:626: error: passing argument 38 of ‘gpu_kernel_revvecziscan_stage3_10639’ makes integer from pointer without a cast [-Wint-conversion]
12064 |             err = gpu_kernel_revvecziscan_stage3_10639(ctx, num_tblocks_10636, 1, 1, *ctx->tuning_params.revveczisegscan_tblock_sizze_10633, 1, 1, (int64_t) 0, n_8215, m_8216, num_tblocks_10636, num_threads_11084, num_threads_11278, num_threads_12014, required_groups_12351, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, mem_11173.mem, mem_11176.mem, mem_11179.mem, mem_11182.mem, mem_11183.mem, mem_11186.mem, mem_11189.mem, mem_11190.mem, mem_11193.mem, mem_11196.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  unsigned char *
tests/ad/reducebyindex1.c:9069:667: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9069 | static int gpu_kernel_revvecziscan_stage3_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, int32_t arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21, gpu_mem arg22, gpu_mem arg23, gpu_mem arg24, gpu_mem arg25, gpu_mem arg26, gpu_mem arg27, gpu_mem arg28, gpu_mem arg29, gpu_mem arg30)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ~~~~~~~~^~~~~
tests/ad/reducebyindex1.c:12064:646: error: passing argument 39 of ‘gpu_kernel_revvecziscan_stage3_10639’ makes integer from pointer without a cast [-Wint-conversion]
12064 |             err = gpu_kernel_revvecziscan_stage3_10639(ctx, num_tblocks_10636, 1, 1, *ctx->tuning_params.revveczisegscan_tblock_sizze_10633, 1, 1, (int64_t) 0, n_8215, m_8216, num_tblocks_10636, num_threads_11084, num_threads_11278, num_threads_12014, required_groups_12351, mem_11106.mem, mem_11110.mem, mem_11112.mem, mem_11114.mem, mem_11140.mem, mem_11144.mem, mem_11146.mem, mem_11148.mem, mem_11173.mem, mem_11176.mem, mem_11179.mem, mem_11182.mem, mem_11183.mem, mem_11186.mem, mem_11189.mem, mem_11190.mem, mem_11193.mem, mem_11196.mem, scan_out_mem_12002, scan_out_mem_12004, scan_out_mem_12006, scan_out_mem_12008, scan_out_mem_12010, scan_out_mem_12012);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      unsigned char *
tests/ad/reducebyindex1.c:9069:682: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9069 | static int gpu_kernel_revvecziscan_stage3_10639(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int32_t arg5, int32_t arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10, gpu_mem arg11, gpu_mem arg12, gpu_mem arg13, gpu_mem arg14, gpu_mem arg15, gpu_mem arg16, gpu_mem arg17, gpu_mem arg18, gpu_mem arg19, gpu_mem arg20, gpu_mem arg21, gpu_mem arg22, gpu_mem arg23, gpu_mem arg24, gpu_mem arg25, gpu_mem arg26, gpu_mem arg27, gpu_mem arg28, gpu_mem arg29, gpu_mem arg30)
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ~~~~~~~~^~~~~

If you find this error message confusing, uninformative, or wrong, please open an issue:
  https://github.com/diku-dk/futhark/issues

tests/ad/scan8.fut:
Command failed with ExitFailure 1:
./tests/ad/scan8 --cache-file tests/ad/scan8.fut.cache
Stderr:
./tests/ad/scan8: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(5324): error: "gtid_17998" has already been declared in the current scope
      int64_t gtid_17998;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/ad/scan6.fut:
Command failed with ExitFailure 1:
./tests/ad/scan6 --cache-file tests/ad/scan6.fut.cache
Stderr:
./tests/ad/scan6: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4685): error: "gtid_15620" has already been declared in the current scope
      int64_t gtid_15620;
              ^

futhark-cuda(7041): error: "gtid_16460" has already been declared in the current scope
      int64_t gtid_16460;
              ^

2 errors detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/ad/scanvecbenchtests.fut:
Compiling with --backend=cuda:
gcc failed with code 1:
tests/ad/scanvecbenchtests.c: In function ‘futrts_entry_vecadd’:
tests/ad/scanvecbenchtests.c:12353:390: error: passing argument 13 of ‘gpu_kernel_vecaddziscan_stage1_14003’ makes integer from pointer without a cast [-Wint-conversion]
12353 |             err = gpu_kernel_vecaddziscan_stage1_14003(ctx, stage1_num_tblocks_17800, 1, 1, *ctx->tuning_params.vecaddzisegscan_tblock_sizze_13922, 1, 1, smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_13997) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_13997), (int64_t) 8), (int64_t) 8), n_10142, m_10143, num_threads_17803, mem_17183.mem, scan_out_mem_17801);
      |                                                                                                                                                                                                                                                                                                                                                                                                      ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                      |
      |                                                                                                                                                                                                                                                                                                                                                                                                      unsigned char *
tests/ad/scanvecbenchtests.c:9753:298: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9753 | static int gpu_kernel_vecaddziscan_stage1_14003(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int32_t arg2, gpu_mem arg3, gpu_mem arg4)
      |                                                                                                                                                                                                                                                                                                  ~~~~~~~~^~~~
tests/ad/scanvecbenchtests.c:12360:354: error: passing argument 13 of ‘gpu_kernel_vecaddziscan_stage2_14003’ makes integer from pointer without a cast [-Wint-conversion]
12360 |             err = gpu_kernel_vecaddziscan_stage2_14003(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_17800, 1, 1, smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_17800) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_17800), (int64_t) 8), (int64_t) 8), n_10142, m_10143, stage1_num_tblocks_17800, num_threads_17803, scan_out_mem_17801);
      |                                                                                                                                                                                                                                                                                                                                                                  ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                  |
      |                                                                                                                                                                                                                                                                                                                                                                  unsigned char *
tests/ad/scanvecbenchtests.c:9763:298: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9763 | static int gpu_kernel_vecaddziscan_stage2_14003(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, gpu_mem arg4)
      |                                                                                                                                                                                                                                                                                                  ~~~~~~~~^~~~
tests/ad/scanvecbenchtests.c:12368:270: error: passing argument 16 of ‘gpu_kernel_vecaddziscan_stage3_14003’ makes integer from pointer without a cast [-Wint-conversion]
12368 |             err = gpu_kernel_vecaddziscan_stage3_14003(ctx, num_tblocks_13998, 1, 1, *ctx->tuning_params.vecaddzisegscan_tblock_sizze_13922, 1, 1, (int64_t) 0, n_10142, m_10143, num_tblocks_13998, num_threads_17803, required_groups_17856, mem_17187.mem, mem_17191.mem, scan_out_mem_17801);
      |                                                                                                                                                                                                                                                                              ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                              |
      |                                                                                                                                                                                                                                                                              unsigned char *
tests/ad/scanvecbenchtests.c:9773:340: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9773 | static int gpu_kernel_vecaddziscan_stage3_14003(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7)
      |                                                                                                                                                                                                                                                                                                                                            ~~~~~~~~^~~~
tests/ad/scanvecbenchtests.c: In function ‘futrts_entry_vecmul’:
tests/ad/scanvecbenchtests.c:13504:591: error: passing argument 14 of ‘gpu_kernel_vecmulziscan_stage1_15139’ makes integer from pointer without a cast [-Wint-conversion]
13504 |             err = gpu_kernel_vecmulziscan_stage1_15139(ctx, stage1_num_tblocks_17800, 1, 1, *ctx->tuning_params.vecmulzisegscan_tblock_sizze_15049, 1, 1, smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_15132) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_15132), (int64_t) 8), (int64_t) 8) + (smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_15132) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_15132), (int64_t) 8), (int64_t) 8)), n_11675, m_11676, num_threads_17805, mem_17177.mem, mem_17194.mem, scan_out_mem_17801, scan_out_mem_17803);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               unsigned char *
tests/ad/scanvecbenchtests.c:9943:312: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9943 | static int gpu_kernel_vecmulziscan_stage1_15139(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int32_t arg2, gpu_mem arg3, gpu_mem arg4, gpu_mem arg5, gpu_mem arg6)
      |                                                                                                                                                                                                                                                                                                                ~~~~~~~~^~~~
tests/ad/scanvecbenchtests.c:13504:611: error: passing argument 15 of ‘gpu_kernel_vecmulziscan_stage1_15139’ makes integer from pointer without a cast [-Wint-conversion]
13504 |             err = gpu_kernel_vecmulziscan_stage1_15139(ctx, stage1_num_tblocks_17800, 1, 1, *ctx->tuning_params.vecmulzisegscan_tblock_sizze_15049, 1, 1, smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_15132) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_15132), (int64_t) 8), (int64_t) 8) + (smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_15132) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * segscan_tblock_sizze_15132), (int64_t) 8), (int64_t) 8)), n_11675, m_11676, num_threads_17805, mem_17177.mem, mem_17194.mem, scan_out_mem_17801, scan_out_mem_17803);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   unsigned char *
tests/ad/scanvecbenchtests.c:9943:326: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9943 | static int gpu_kernel_vecmulziscan_stage1_15139(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int32_t arg2, gpu_mem arg3, gpu_mem arg4, gpu_mem arg5, gpu_mem arg6)
      |                                                                                                                                                                                                                                                                                                                              ~~~~~~~~^~~~
tests/ad/scanvecbenchtests.c:13511:536: error: passing argument 13 of ‘gpu_kernel_vecmulziscan_stage2_15139’ makes integer from pointer without a cast [-Wint-conversion]
13511 |             err = gpu_kernel_vecmulziscan_stage2_15139(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_17800, 1, 1, smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_17800) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_17800), (int64_t) 8), (int64_t) 8) + (smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_17800) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_17800), (int64_t) 8), (int64_t) 8)), n_11675, m_11676, stage1_num_tblocks_17800, num_threads_17805, scan_out_mem_17801, scan_out_mem_17803);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        unsigned char *
tests/ad/scanvecbenchtests.c:9953:298: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9953 | static int gpu_kernel_vecmulziscan_stage2_15139(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, gpu_mem arg4, gpu_mem arg5)
      |                                                                                                                                                                                                                                                                                                  ~~~~~~~~^~~~
tests/ad/scanvecbenchtests.c:13511:556: error: passing argument 14 of ‘gpu_kernel_vecmulziscan_stage2_15139’ makes integer from pointer without a cast [-Wint-conversion]
13511 |             err = gpu_kernel_vecmulziscan_stage2_15139(ctx, (int64_t) 1, 1, 1, stage1_num_tblocks_17800, 1, 1, smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_17800) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_17800), (int64_t) 8), (int64_t) 8) + (smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_17800) + srem64((int64_t) 8 - srem64(smax64((int64_t) 1, (int64_t) 4 * stage1_num_tblocks_17800), (int64_t) 8), (int64_t) 8)), n_11675, m_11676, stage1_num_tblocks_17800, num_threads_17805, scan_out_mem_17801, scan_out_mem_17803);
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            unsigned char *
tests/ad/scanvecbenchtests.c:9953:312: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9953 | static int gpu_kernel_vecmulziscan_stage2_15139(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, gpu_mem arg4, gpu_mem arg5)
      |                                                                                                                                                                                                                                                                                                                ~~~~~~~~^~~~
tests/ad/scanvecbenchtests.c:13519:300: error: passing argument 18 of ‘gpu_kernel_vecmulziscan_stage3_15139’ makes integer from pointer without a cast [-Wint-conversion]
13519 |             err = gpu_kernel_vecmulziscan_stage3_15139(ctx, num_tblocks_15133, 1, 1, *ctx->tuning_params.vecmulzisegscan_tblock_sizze_15049, 1, 1, (int64_t) 0, n_11675, m_11676, num_tblocks_15133, num_threads_17805, required_groups_17880, mem_17198.mem, mem_17201.mem, mem_17205.mem, mem_17209.mem, scan_out_mem_17801, scan_out_mem_17803);
      |                                                                                                                                                                                                                                                                                                            ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                            |
      |                                                                                                                                                                                                                                                                                                            unsigned char *
tests/ad/scanvecbenchtests.c:9963:368: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9963 | static int gpu_kernel_vecmulziscan_stage3_15139(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10)
      |                                                                                                                                                                                                                                                                                                                                                                        ~~~~~~~~^~~~
tests/ad/scanvecbenchtests.c:13519:320: error: passing argument 19 of ‘gpu_kernel_vecmulziscan_stage3_15139’ makes integer from pointer without a cast [-Wint-conversion]
13519 |             err = gpu_kernel_vecmulziscan_stage3_15139(ctx, num_tblocks_15133, 1, 1, *ctx->tuning_params.vecmulzisegscan_tblock_sizze_15049, 1, 1, (int64_t) 0, n_11675, m_11676, num_tblocks_15133, num_threads_17805, required_groups_17880, mem_17198.mem, mem_17201.mem, mem_17205.mem, mem_17209.mem, scan_out_mem_17801, scan_out_mem_17803);
      |                                                                                                                                                                                                                                                                                                                                ^~~~~~~~~~~~~~~~~~
      |                                                                                                                                                                                                                                                                                                                                |
      |                                                                                                                                                                                                                                                                                                                                unsigned char *
tests/ad/scanvecbenchtests.c:9963:382: note: expected ‘gpu_mem’ {aka ‘long long unsigned int’} but argument is of type ‘unsigned char *’
 9963 | static int gpu_kernel_vecmulziscan_stage3_15139(struct futhark_context *ctx, unsigned int grid_x, unsigned int grid_y, unsigned int grid_z, unsigned int block_x, unsigned int block_y, unsigned int block_z, unsigned int shared_bytes, int64_t arg0, int64_t arg1, int64_t arg2, int32_t arg3, int32_t arg4, gpu_mem arg5, gpu_mem arg6, gpu_mem arg7, gpu_mem arg8, gpu_mem arg9, gpu_mem arg10)
      |                                                                                                                                                                                                                                                                                                                                                                                      ~~~~~~~~^~~~~

If you find this error message confusing, uninformative, or wrong, please open an issue:
  https://github.com/diku-dk/futhark/issues

tests/ad/scan9.fut:
Command failed with ExitFailure 1:
./tests/ad/scan9 --cache-file tests/ad/scan9.fut.cache
Stderr:
./tests/ad/scan9: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(6462): error: "gtid_31829" has already been declared in the current scope
      int64_t gtid_31829;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/fusion/fuseFilter1.fut:
Compiling with --backend=cuda:
Running compiled program:
Running ./tests/fusion/fuseFilter1 --cache-file tests/fusion/fuseFilter1.fut.cache:
Entry point: main; dataset: #0 ("[3i32, 5i32, -2i32, 3i32, 4i32, -30i32] [-4i32, 10..."):
tests/fusion/fuseFilter1.fut.main.0.actual and tests/fusion/fuseFilter1.fut.main.0.expected do not match:
Value #0 index [1]: expected 4, got 0
tests/fusion/WithAccs/ker2-radix.fut:
Command failed with ExitFailure 1:
./tests/fusion/WithAccs/ker2-radix --cache-file tests/fusion/WithAccs/ker2-radix.fut.cache
Stderr:
./tests/fusion/WithAccs/ker2-radix: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4163): error: "gtid_10816" has already been declared in the current scope
          int64_t gtid_10816;
                  ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/fusion/map-scatter-map.fut:
Compiling with --backend=cuda:

tests/fusion/fuseFilter2.fut:
Compiling with --backend=cuda:
Running compiled program:
Running ./tests/fusion/fuseFilter2 --cache-file tests/fusion/fuseFilter2.fut.cache:
Entry point: main; dataset: #0 ("[1i32, 2i32, 3i32, 4i32] [5i32, 6i32, 7i32, 8i32]"):
tests/fusion/fuseFilter2.fut.main.0.actual and tests/fusion/fuseFilter2.fut.main.0.expected do not match:
Value #0: expected 26, got 229
tests/fusion/iswim1.fut:
Compiling with --backend=cuda:
futhark: internal error: PAP object (0x4202c1e330) entered!
Stack trace:
futhark: Failed to get stack frames of current process: No DWARF information found: Success
                 0xbb63e90    set_initial_registers (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)
            0x7f3d94499168    dwfl_thread_getframes (/nix/store/qsfx2pvlcapk6aiw3jf21crdx82izd6r-elfutils-0.192/lib/libdw-0.192.so)
            0x7f3d94498b9b    get_one_thread_cb (/nix/store/qsfx2pvlcapk6aiw3jf21crdx82izd6r-elfutils-0.192/lib/libdw-0.192.so)
            0x7f3d94498f6a    dwfl_getthreads (/nix/store/qsfx2pvlcapk6aiw3jf21crdx82izd6r-elfutils-0.192/lib/libdw-0.192.so)
            0x7f3d944994d4    dwfl_getthread_frames (/nix/store/qsfx2pvlcapk6aiw3jf21crdx82izd6r-elfutils-0.192/lib/libdw-0.192.so)
                 0xbb645d1    libdwGetBacktrace (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)
                 0xbb21586    rtsFatalInternalErrorFn (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)
                 0xbb217ba    barf (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)
                 0xbb4cde5    stg_PAP_info (/home/due/git/diku-dk/futhark/dist-newstyle/build/x86_64-linux/ghc-9.6.6/futhark-0.26.0/x/futhark/build/futhark/futhark)

    (GHC version 9.6.6 for x86_64_unknown_linux)
    Please report this as a GHC bug:  https://www.haskell.org/ghc/reportabug

tests/fusion/filter-filter1.fut:
Compiling with --backend=cuda:
Running compiled program:
Running ./tests/fusion/filter-filter1 --cache-file tests/fusion/filter-filter1.fut.cache:
Entry point: main; dataset: #0 ("[1i32, 2i32, 3i32, 4i32, 5i32, 6i32, 7i32, 8i32, 9..."):
tests/fusion/filter-filter1.fut.main.0.actual and tests/fusion/filter-filter1.fut.main.0.expected do not match:
Value #0 index [1]: expected 30, got -1
...and 4 other mismatches.
tests/fusion/fusion4.fut:
Compiling with --backend=cuda:
Running compiled program:
Running ./tests/fusion/fusion4 --cache-file tests/fusion/fusion4.fut.cache:
Entry point: main; dataset: #0 ("[9i32, -3i32, 5i32, 2i32]"):
tests/fusion/fusion4.fut.main.0.actual and tests/fusion/fusion4.fut.main.0.expected do not match:
Value #0: expected 6, got 9
tests/fusion/fuse-across-transpose6.fut:
Command failed with ExitFailure 1:
./tests/fusion/fuse-across-transpose6 --cache-file tests/fusion/fuse-across-transpose6.fut.cache
Stderr:
./tests/fusion/fuse-across-transpose6: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4120): error: "gtid_7553" has already been declared in the current scope
      int64_t gtid_7553;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/fusion/Vers2.0/maposcanomaposcan.fut:
Compiling with --backend=cuda:
Internal compiler error.  Please report this:
  https://github.com/diku-dk/futhark/issues
Type error after pass 'simplify':
In function entry_main
When checking function body
When matching
   {defunc_0_map_res_5856 : ({}, [d₀_5684]f64)}
with
   segscan(thread; ; grid=num_tblocks_5883; blocksize=segscan_tblock_size_5881)
   (gtid_5885 < d₀_5684) (~phys_tid_5886)
   : {f64} {
     let {x_5770 : ({}, f64)} =
       res_5874[0i64, gtid_5885]
     return {returns x_5770}
   }
   ({0.0f64},
   ,
   \ {eta_p_5758 : f64,
      eta_p_5759 : f64}
     : {f64} ->
     let {defunc_0_op_res_5760 : ({}, f64)} =
       fadd64(eta_p_5758, eta_p_5759)
     in {defunc_0_op_res_5760})
   \ {eta_p_5762 : f64}
     : {f64,
        f64} ->
     let {lifted_lambda_res_5763 : ({}, f64)} =
       fadd64(5.0f64, eta_p_5762)
     in {lifted_lambda_res_5763, eta_p_5762},

Pat
{defunc_0_map_res_5856 : ({}, [d₀_5684]f64)}
cannot match value of type
{[d₀_5684]f64,
 [d₀_5684]f64}.

tests/fusion/Vers2.0/maposcan0.fut:
Compiling with --backend=cuda:
Internal compiler error.  Please report this:
  https://github.com/diku-dk/futhark/issues
Type error after pass 'simplify':
In function entry_main
When checking function body
When matching
   {defunc_0_map_res_5573 : ({}, [d₀_5536]f64)}
with
   segscan(thread; ; grid=num_tblocks_5579; blocksize=segscan_tblock_size_5577)
   (gtid_5581 < d₀_5536) (~phys_tid_5582)
   : {f64} {
     let {x_5572 : ({}, f64)} =
       arr_5537[gtid_5581]
     return {returns x_5572}
   }
   ({0.0f64},
   ,
   \ {eta_p_5565 : f64,
      eta_p_5566 : f64}
     : {f64} ->
     let {defunc_0_op_res_5567 : ({}, f64)} =
       fadd64(eta_p_5565, eta_p_5566)
     in {defunc_0_op_res_5567})
   \ {eta_p_5569 : f64}
     : {f64,
        f64} ->
     let {lifted_lambda_res_5570 : ({}, f64)} =
       fmul64(2.0f64, eta_p_5569)
     in {lifted_lambda_res_5570, eta_p_5569},

Pat
{defunc_0_map_res_5573 : ({}, [d₀_5536]f64)}
cannot match value of type
{[d₀_5536]f64,
 [d₀_5536]f64}.

45 failed, 2096 passed, 221 to go.
tests/fusion/map-scan3.fut:
Command failed with ExitFailure 1:
./tests/fusion/map-scan3 --cache-file tests/fusion/map-scan3.fut.cache
Stderr:
./tests/fusion/map-scan3: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3980): error: "gtid_6132" has already been declared in the current scope
      int64_t gtid_6132;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/fusion/iswim3.fut:
Command failed with ExitFailure 1:
./tests/fusion/iswim3 --cache-file tests/fusion/iswim3.fut.cache
Stderr:
./tests/fusion/iswim3: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4155): error: "gtid_6554" has already been declared in the current scope
      int64_t gtid_6554;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/memory-block-merging/coalescing/issue-2010.fut:
Compiling with --backend=cuda:
Running compiled program:
Running ./tests/memory-block-merging/coalescing/issue-2010 --cache-file tests/memory-block-merging/coalescing/issue-2010.fut.cache:
Entry point: main; dataset: #0 ("[1i32, 2i32, 3i32, 4i32, 5i32, 6i32, 7i32]"):
tests/memory-block-merging/coalescing/issue-2010.fut.main.0.actual and tests/memory-block-merging/coalescing/issue-2010.fut.main.0.expected do not match:
Value #1 index [2]: expected 6, got 96
...and 4 other mismatches.
tests/quickselect.fut:
Compiling with --backend=cuda:
Running compiled program:
Running ./tests/quickselect --cache-file tests/quickselect.fut.cache:
Entry point: main; dataset: #1 ("[4i32, -8i32, 2i32, 2i32, 0i32, 0i32, 5i32, 9i32, ..."):
tests/quickselect.fut.main.1.actual and tests/quickselect.fut.main.1.expected do not match:
Value #0: expected 4, got -1476388608
tests/intragroup/scan0.fut:
Command failed with ExitFailure 1:
./tests/intragroup/scan0 --cache-file tests/intragroup/scan0.fut.cache --tuning tests/intragroup/scan0.fut.tuning
Stderr:
./tests/intragroup/scan0: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3902): error: "gtid_5621" has already been declared in the current scope
      int64_t gtid_5621;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/intragroup/expansion0.fut:
Command failed with ExitFailure 1:
./tests/intragroup/expansion0 --cache-file tests/intragroup/expansion0.fut.cache
Stderr:
./tests/intragroup/expansion0: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3953): error: "gtid_5917" has already been declared in the current scope
              int64_t gtid_5917;
                      ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/intragroup/segscan1.fut:
Command failed with ExitFailure 1:
./tests/intragroup/segscan1 --cache-file tests/intragroup/segscan1.fut.cache
Stderr:
./tests/intragroup/segscan1: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3916): error: "gtid_6575" has already been declared in the current scope
      int64_t gtid_6575;
              ^

futhark-cuda(3917): error: "gtid_6576" has already been declared in the current scope
      int64_t gtid_6576;
              ^

2 errors detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/intragroup/segscan0.fut:
Command failed with ExitFailure 1:
./tests/intragroup/segscan0 --cache-file tests/intragroup/segscan0.fut.cache
Stderr:
./tests/intragroup/segscan0: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3905): error: "gtid_5794" has already been declared in the current scope
      int64_t gtid_5794;
              ^

futhark-cuda(3906): error: "gtid_5795" has already been declared in the current scope
      int64_t gtid_5795;
              ^

2 errors detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/intragroup/complex-screma.fut:
Command failed with ExitFailure 1:
./tests/intragroup/complex-screma --cache-file tests/intragroup/complex-screma.fut.cache
Stderr:
./tests/intragroup/complex-screma: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3911): error: "gtid_5880" has already been declared in the current scope
      int64_t gtid_5880;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/intragroup/scan3.fut:
Command failed with ExitFailure 1:
./tests/intragroup/scan3 --cache-file tests/intragroup/scan3.fut.cache
Stderr:
./tests/intragroup/scan3: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3910): error: "gtid_5886" has already been declared in the current scope
      int64_t gtid_5886;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/intragroup/inplace0.fut:
Command failed with ExitFailure 1:
./tests/intragroup/inplace0 --cache-file tests/intragroup/inplace0.fut.cache
Stderr:
./tests/intragroup/inplace0: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3907): error: "gtid_5793" has already been declared in the current scope
      int64_t gtid_5793;
              ^

futhark-cuda(3923): error: "gtid_5804" has already been declared in the current scope
      int64_t gtid_5804;
              ^

2 errors detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/intragroup/scan1.fut:
Command failed with ExitFailure 1:
./tests/intragroup/scan1 --cache-file tests/intragroup/scan1.fut.cache --tuning tests/intragroup/scan1.fut.tuning
Stderr:
./tests/intragroup/scan1: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3913): error: "gtid_5799" has already been declared in the current scope
      int64_t gtid_5799;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/intragroup/big0.fut:
Command failed with ExitFailure 1:
./tests/intragroup/big0 --cache-file tests/intragroup/big0.fut.cache
Stderr:
./tests/intragroup/big0: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3980): error: "gtid_6145" has already been declared in the current scope
      int64_t gtid_6145;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/intragroup/scan2.fut:
Command failed with ExitFailure 1:
./tests/intragroup/scan2 --cache-file tests/intragroup/scan2.fut.cache --tuning tests/intragroup/scan2.fut.tuning
Stderr:
./tests/intragroup/scan2: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3903): error: "gtid_5815" has already been declared in the current scope
      int64_t gtid_5815;
              ^

1 error detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/intragroup/segscan2.fut:
Command failed with ExitFailure 1:
./tests/intragroup/segscan2 --cache-file tests/intragroup/segscan2.fut.cache
Stderr:
./tests/intragroup/segscan2: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(3905): error: "gtid_6005" has already been declared in the current scope
      int64_t gtid_6005;
              ^

futhark-cuda(3906): error: "gtid_6006" has already been declared in the current scope
      int64_t gtid_6006;
              ^

2 errors detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
60 failed, 2271 passed, 31 to go.
tests/intragroup/toomuch.fut:
Command failed with ExitFailure 1:
./tests/intragroup/toomuch --cache-file tests/intragroup/toomuch.fut.cache --tuning tests/intragroup/toomuch.fut.tuning
Stderr:
./tests/intragroup/toomuch: During CUDA initialisation:
NVRTC compilation failed.

futhark-cuda(4088): error: "gtid_16930" has already been declared in the current scope
      int64_t gtid_16930;
              ^

futhark-cuda(4123): error: "gtid_16966" has already been declared in the current scope
      int64_t gtid_16966;
              ^

futhark-cuda(4158): error: "gtid_17008" has already been declared in the current scope
      int64_t gtid_17008;
              ^

futhark-cuda(4193): error: "gtid_17050" has already been declared in the current scope
      int64_t gtid_17050;
              ^

futhark-cuda(4228): error: "gtid_17092" has already been declared in the current scope
      int64_t gtid_17092;
              ^

futhark-cuda(4263): error: "gtid_17134" has already been declared in the current scope
      int64_t gtid_17134;
              ^

futhark-cuda(4298): error: "gtid_17176" has already been declared in the current scope
      int64_t gtid_17176;
              ^

futhark-cuda(4333): error: "gtid_17218" has already been declared in the current scope
      int64_t gtid_17218;
              ^

futhark-cuda(4368): error: "gtid_17260" has already been declared in the current scope
      int64_t gtid_17260;
              ^

9 errors detected in the compilation of "futhark-cuda".



CallStack (from HasCallStack):
  error, called at src/Futhark/Server.hs:172:7 in futhark-server-1.2.3.0-7250c2740dc4c0abcfeb7145d73e8ff6bb7391dc27d7fb42db00f3b3fed324ff:Futhark.Server
CallStack (from -prof):
  Futhark.Server.startServer (src/Futhark/Server.hs:(136,1)-(178,21))
  Futhark.Server.withServer (src/Futhark/Server.hs:(202,1)-(214,37))
  Futhark.CLI.Test.pureTestResults (src/Futhark/CLI/Test.hs:(84,1)-(89,49))
  Futhark.CLI.Test.withProgramServer (src/Futhark/CLI/Test.hs:(96,1)-(116,25))
  Futhark.CLI.Test.context (src/Futhark/CLI/Test.hs:(61,1)-(64,40))
  Futhark.CLI.Test.runTestCase (src/Futhark/CLI/Test.hs:(255,1)-(326,70))
  Futhark.CLI.Test.runTestM (src/Futhark/CLI/Test.hs:55:1-61)
  Futhark.CLI.Test.catching (src/Futhark/CLI/Test.hs:(453,1)-(456,40))
  Futhark.CLI.Test.doTest (src/Futhark/CLI/Test.hs:459:1-42)
  Futhark.CLI.Test.runTest (src/Futhark/CLI/Test.hs:(470,1)-(474,37))
  Futhark.CLI.Test.runTests (src/Futhark/CLI/Test.hs:(555,1)-(662,22))
  Futhark.Util.Options.mainWithOptions (src/Futhark/Util/Options.hs:(34,1)-(53,71))
  Futhark.CLI.Test.main (src/Futhark/CLI/Test.hs:(843,1)-(846,54))
  Futhark.CLI.Main.commands (src/Futhark/CLI/Main.hs:(53,1)-(92,5))
  Futhark.CLI.Main.reportingIOErrors (src/Futhark/CLI/Main.hs:(107,1)-(145,27))
  Futhark.CLI.Main.main (src/Futhark/CLI/Main.hs:(149,1)-(160,68))
tests/localfunction11.fut:
Compiling with --backend=cuda:
Internal compiler error.  Please report this:
  https://github.com/diku-dk/futhark/issues
Type error after pass 'simplify':
In function entry_main
When checking function body
In expression of statement
  {defunc_0_f_res_6199 : ({}, i64),
   defunc_0_f_res_6200 : ({}, [defunc_0_f_res_6199]i32)}
in body of last case
In expression of statement
  {scatter_res_6275 : ({}, [d₀_5972]i32),
   defunc_0_scan_res_6276 : ({}, [d₀_5972]i64)}
in body of last case
When matching
   {scatter_res_6455 : ({}, [d₀_5972]i32)}
with
   segscan(thread; ; grid=num_tblocks_6453; blocksize=segscan_tblock_size_6452)
   (gtid_6456 < d₀_5972) (~phys_tid_6457)
   : {i64} {
     let {x_6458 : ({}, i64)} =
       scatter_res_map_acc_6411[gtid_6456]
     return {returns x_6458}
   }
   ({0i64},
   ,
   \ {eta_p_6459 : i64,
      eta_p_6460 : i64}
     : {i64} ->
     let {defunc_0_op_res_6461 : ({}, i64)} =
       add64(eta_p_6459, eta_p_6460)
     in {defunc_0_op_res_6461})
   \ {x_6462 : i64}
     : {i64} ->
     {x_6462},

Pat
{scatter_res_6455 : ({}, [d₀_5972]i32)}
cannot match value of type
{[d₀_5972]i64}.

2300/2362 passed.
7 program(s) excluded.
